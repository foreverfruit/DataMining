<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>report1.md</title><link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}.CodeMirror { height: auto; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; }
.CodeMirror-lines { padding: 4px 0px; }
.CodeMirror pre { }
.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { background-color: white; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); white-space: nowrap; }
.CodeMirror-linenumbers { }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.CodeMirror div.CodeMirror-cursor { border-left: 1px solid black; z-index: 3; }
.CodeMirror div.CodeMirror-secondarycursor { border-left: 1px solid silver; }
.CodeMirror.cm-keymap-fat-cursor div.CodeMirror-cursor { width: auto; border: 0px; background: rgb(119, 238, 119); z-index: 1; }
.CodeMirror div.CodeMirror-cursor.CodeMirror-overwrite { }
.cm-tab { display: inline-block; }
.cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property { color: rgb(217, 79, 138); }
.cm-s-typora-default pre.cm-header1:not(.cm-atom) :not(.cm-overlay) { font-size: 2rem; line-height: 2rem; }
.cm-s-typora-default pre.cm-header2:not(.cm-atom) :not(.cm-overlay) { font-size: 1.4rem; line-height: 1.4rem; }
.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(149, 132, 134); }
.cm-s-typora-default .cm-table-row, .cm-s-typora-default .cm-block-start { font-family: monospace; }
.cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code { color: rgb(74, 90, 159); font-family: monospace; }
.cm-s-typora-default .cm-tag { color: rgb(169, 68, 66); }
.cm-s-typora-default .cm-string { color: rgb(126, 134, 169); }
.cm-s-typora-default .cm-link { color: rgb(196, 122, 15); text-decoration: underline; }
.cm-s-typora-default .cm-variable-2, .cm-s-typora-default .cm-variable-1 { color: inherit; }
.cm-s-typora-default .cm-overlay { font-family: monospace; }
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor { border-left: 3px solid rgb(228, 98, 154); }
.cm-s-typora-default .CodeMirror-activeline-background { left: -60px; right: -30px; background: rgba(204, 204, 204, 0.2); }
.cm-s-typora-default .CodeMirror-gutters { border-right: none; background-color: inherit; }
.cm-s-typora-default .cm-trailing-space-new-line::after, .cm-startspace::after, .cm-starttab .cm-tab::after { content: "•"; position: absolute; left: 0px; opacity: 0; font-family: LetterGothicStd, monospace; }
.os-windows .cm-startspace::after, .os-windows .cm-starttab .cm-tab::after { left: -0.1em; }
.cm-starttab .cm-tab::after { content: " "; }
.cm-startspace, .cm-tab, .cm-starttab, .cm-trailing-space-a, .cm-trailing-space-b, .cm-trailing-space-new-line { font-family: monospace; position: relative; }
.cm-s-typora-default .cm-trailing-space-new-line::after { content: "↓"; opacity: 0.3; }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: black; }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-property { color: black; }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: blue; }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: bold; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: rgb(255, 0, 0); }
.cm-invalidchar { color: rgb(255, 0, 0); }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; padding-right: 30px; height: 100%; outline: none; position: relative; box-sizing: content-box; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: none !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: transparent; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-widget { }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.CodeMirror-selected { background: rgb(217, 217, 217); }
.CodeMirror-focused .CodeMirror-selected { background: rgb(215, 212, 240); }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
.CodeMirror span { }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}
.CodeMirror-lint-markers { width: 16px; }
.CodeMirror-lint-tooltip { background-color: infobackground; border: 1px solid black; border-radius: 4px; color: infotext; font-family: monospace; overflow: hidden; padding: 2px 5px; position: fixed; white-space: pre-wrap; z-index: 10000; max-width: 600px; opacity: 0; transition: opacity 0.4s; font-size: 0.8em; }
.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning { background-position: left bottom; background-repeat: repeat-x; }
.CodeMirror-lint-mark-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg=="); }
.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning { background-position: center center; background-repeat: no-repeat; cursor: pointer; display: inline-block; height: 16px; width: 16px; vertical-align: middle; position: relative; }
.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning { padding-left: 18px; background-position: left top; background-repeat: no-repeat; }
.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-multiple { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC"); background-repeat: no-repeat; background-position: right bottom; width: 100%; height: 100%; }


:root { --bg-color: #ffffff; --text-color: #333333; --code-block-bg-color: inherit; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { background: rgb(181, 214, 252); text-shadow: none; }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; overflow-x: visible; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
.typora-export #write { margin: 0px auto; }
#write > p:first-child, #write > ul:first-child, #write > ol:first-child, #write > pre:first-child, #write > blockquote:first-child, #write > div:first-child, #write > table:first-child { margin-top: 30px; }
#write li > table:first-child { margin-top: -20px; }
img { max-width: 100%; vertical-align: middle; }
input, button, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
::before, ::after, * { box-sizing: border-box; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write div, #write pre { width: inherit; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6 { position: relative; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.typora-export p { white-space: normal; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0rem; -webkit-margin-after: 0rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: bold; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.701961); color: rgb(85, 85, 85); border-radius: 4px; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; margin: 4px 0px 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: var(--code-block-bg-color); position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
.md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number .md-fences { padding-left: 0px; }
.show-fences-line-number .md-fences.mock-cm { padding-left: 40px; }
.footnotes { opacity: 0.8; font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; }
.footnotes + .footnotes { margin-top: -1em; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: transparent; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: normal; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li p, li .mathjax-block { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; }
@media print {
  html, body { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  h1, h2, h3, h4, h5, h6 { break-after: avoid-page; orphans: 2; }
  p { orphans: 4; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0mm; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 2.86rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
.mathjax-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: none; box-shadow: none; }
.task-list { list-style-type: none; }
.task-list-item { position: relative; padding-left: 1em; }
.task-list-item input { position: absolute; top: 0px; left: 0px; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc::after, .md-toc-content::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); text-decoration: none; }
.md-toc-inner:hover { }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: bold; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
.md-tag { opacity: 0.5; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: monospace; }
code { text-align: left; }
h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; }
a.md-print-anchor { border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: none !important; background: transparent !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0em; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: normal; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; }


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: normal;
    src: local('Open Sans Regular'),url('file:////home/heyufeng/.config/Typora/themes/github/400.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: normal;
    src: local('Open Sans Italic'),url('file:////home/heyufeng/.config/Typora/themes/github/400i.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: bold;
    src: local('Open Sans Bold'),url('file:////home/heyufeng/.config/Typora/themes/github/700.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: bold;
    src: local('Open Sans Bold Italic'),url('file:////home/heyufeng/.config/Typora/themes/github/700i.woff') format('woff')
}

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write{
    max-width: 860px;
  	margin: 0 auto;
  	padding: 20px 30px 40px 30px;
	padding-top: 20px;
    padding-bottom: 100px;
}
#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}
body > *:last-child {
    margin-bottom: 0 !important;
}
a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    /*background: url("file:////home/heyufeng/.config/images/modules/styleguide/para.png") no-repeat 10px center;*/
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
    border-bottom: 1px solid #ddd;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}
body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}
a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}
h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}
li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dddddd;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #cccccc;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n) {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-gutters {
    border-right: 1px solid #ddd;
}

.md-fences,
code,
tt {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;
}
.task-list{
	padding-left: 0;
}

.task-list-item {
	padding-left:32px;
}

.task-list-item input {
  top: 3px;
  left: 8px;
}

@media screen and (min-width: 914px) {
    /*body {
        width: 854px;
        margin: 0 auto;
    }*/
}
@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    border: 1px solid #ddd;
    border-radius: 3px;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag{
	color: inherit;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

#md-notification:before {
    top: 10px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}



</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n3"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n3">Project 2 _ Report 1</a></span><span class="md-toc-item md-toc-h2" data-ref="n9"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n9">计划任务</a></span><span class="md-toc-item md-toc-h2" data-ref="n24"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n24">Task1_数据预处理</a></span><span class="md-toc-item md-toc-h2" data-ref="n133"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n133">Task2_Python学习</a></span><span class="md-toc-item md-toc-h2" data-ref="n152"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n152">Task3_决策树实现</a></span></p></div><hr /><h1><a name='header-n3' class='md-header-anchor '></a>Project 2 _ Report 1</h1><p>本课程相关内容已划分好文件夹全部上传到Github，地址如下：</p><p><a href='https://github.com/foreverfruit/DataMining.git'>https://github.com/foreverfruit/DataMining.git</a></p><hr /><h2><a name='header-n9' class='md-header-anchor '></a>计划任务</h2><p>根据本课程项目二计划书，第一阶段任务如下（摘自proposal）：</p><blockquote><ul><li>数据预处理，将文本数据整理成需要的格式。</li><li>完成python语言的学习。</li><li>学习一种分类算法的理论，尝试采用python实现，或者至少能应用已有开源库做一些该算法的demo。 </li></ul></blockquote><hr /><h2><a name='header-n24' class='md-header-anchor '></a>Task1_数据预处理</h2><p>1.去除缺失数据。本数据集训练集中存在属性缺失的记录数量为2399，占比0.0737，不做额外处理，直接舍弃。</p><p>2.对连续型数据做简单统计：最大值、最小值、均值、方差、与类别的相关度，统计结果如表所示：</p><table><thead><tr><th>属性名</th><th>最小值</th><th>最大值</th><th>均值</th><th>标准差</th><th>相关性</th></tr></thead><tbody><tr><td>age</td><td>17</td><td>90</td><td>38.44</td><td>13.13</td><td>0.242</td></tr><tr><td>fnlwgt</td><td>13769</td><td>1484705</td><td>189793.83</td><td>105652.97</td><td>-0.009</td></tr><tr><td>edu_num</td><td>1</td><td>16</td><td>10.12</td><td>2.55</td><td>0.335</td></tr><tr><td>cpl_gain</td><td>0</td><td>99999</td><td>1092.01</td><td>7406.35</td><td>0.221</td></tr><tr><td>cpl_loss</td><td>0</td><td>4356</td><td>88.37</td><td>404.30</td><td>0.150</td></tr><tr><td>hours_pw</td><td>1</td><td>99</td><td>40.93</td><td>11.98</td><td>0.229</td></tr></tbody></table><p>3.数据离散化：</p><ul><li><p>对连续数据进行离散化映射，区间到int值的映射，并保证区间的有序性。离散化方法：</p><ul><li><p>先看分布情况，再根据分布做映射。</p></li><li><p>像age、edu_num、hours_pw这样的属性，取值空间较小，可以直接简单的固定区间长度做映射。edu_num不做处理。age、hours_pw的处理如下公式：</p><p><span class="MathJax_Preview"></span><span class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="-1" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="39.287ex" height="2.754ex" viewBox="0 -857.7 16915.1 1185.6" role="img" focusable="false" style="vertical-align: -0.762ex;"><defs><path stroke-width="1" id="E12-MJMATHI-61" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path stroke-width="1" id="E12-MJMATHI-67" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path stroke-width="1" id="E12-MJMATHI-65" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path stroke-width="1" id="E12-MJMAIN-2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"></path><path stroke-width="1" id="E12-MJMAIN-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path stroke-width="1" id="E12-MJMAIN-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path stroke-width="1" id="E12-MJMAIN-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path stroke-width="1" id="E12-MJMAIN-2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path><path stroke-width="1" id="E12-MJMATHI-68" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"></path><path stroke-width="1" id="E12-MJMATHI-6F" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path stroke-width="1" id="E12-MJMATHI-75" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path stroke-width="1" id="E12-MJMATHI-72" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path stroke-width="1" id="E12-MJMATHI-73" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path stroke-width="1" id="E12-MJMAIN-5F" d="M0 -62V-25H499V-62H0Z"></path><path stroke-width="1" id="E12-MJMATHI-70" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path><path stroke-width="1" id="E12-MJMATHI-77" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-61" x="0" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-67" x="529" y="0"></use><g transform="translate(1010,0)"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-65" x="0" y="0"></use><use transform="scale(0.707)" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMAIN-2032" x="659" y="583"></use></g><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMAIN-3D" x="2049" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-61" x="3105" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-67" x="3634" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-65" x="4115" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMAIN-2F" x="4581" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMAIN-35" x="5082" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMAIN-2C" x="5582" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-68" x="6028" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-6F" x="6604" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-75" x="7090" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-72" x="7662" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-73" x="8114" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMAIN-5F" x="8583" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-70" x="9084" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-77" x="9587" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMAIN-3D" x="10581" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-68" x="11638" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-6F" x="12214" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-75" x="12700" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-72" x="13272" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-73" x="13724" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMAIN-5F" x="14193" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-70" x="14694" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMATHI-77" x="15197" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMAIN-2F" x="15914" y="0"></use><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#E12-MJMAIN-35" x="16414" y="0"></use></g></svg></span></span><script type="math/tex; mode=display" id="MathJax-Element-9">age'=age/5,hours\_pw=hours\_pw/5</script></p><p>都采用长度为5的划分区间映射到0到20的取值范围上.</p></li><li><p>对fnlwgt、cpl_gain、cpl_loss这样大区间的量，先做一个离群点的判断，剔除上下界上的离群点，再对剩下的数据做取对数操作之后划分区间映射。</p><p>fnlwgt：先取log运算，再划分到（log后的取值范围[9,15]，按0.5长度做等区间长度划分）等长区间做映射。图如下</p><p> <img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask2%5D%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/pic/fnlwgt_log_hist.png' alt='fnlwgt_log_hist.png' /></p><pre class="md-fences md-end-block" lang="python"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; min-height: 384px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fnlwgt</span> = <span class="cm-variable">np</span>.<span class="cm-property">loadtxt</span>(<span class="cm-string">'preprocess'</span>,<span class="cm-builtin">int</span>,<span class="cm-variable">delimiter</span>=<span class="cm-string">','</span>,<span class="cm-variable">usecols</span>=<span class="cm-number">2</span>)</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">a</span> = <span class="cm-variable">np</span>.<span class="cm-property">log</span>(<span class="cm-variable">fnlwgt</span>)</span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">figure</span> = <span class="cm-variable">plt</span>.<span class="cm-property">figure</span>()</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ax1</span> = <span class="cm-variable">figure</span>.<span class="cm-property">add_subplot</span>(<span class="cm-number">121</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ax1</span>.<span class="cm-property">hist</span>(<span class="cm-variable">fnlwgt</span>,<span class="cm-variable">normed</span>=<span class="cm-keyword">True</span>,<span class="cm-variable">bins</span>=<span class="cm-number">100</span>,<span class="cm-variable">color</span>=<span class="cm-string">'r'</span>,<span class="cm-variable">alpha</span>=<span class="cm-number">0.5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ax1</span>.<span class="cm-property">set_title</span>(<span class="cm-string">'fnlwgt'</span>)</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ax2</span> = <span class="cm-variable">figure</span>.<span class="cm-property">add_subplot</span>(<span class="cm-number">122</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ax2</span>.<span class="cm-property">hist</span>(<span class="cm-variable">a</span>,<span class="cm-variable">normed</span>=<span class="cm-keyword">True</span>,<span class="cm-variable">bins</span>=<span class="cm-number">100</span>,<span class="cm-variable">color</span>=<span class="cm-string">'b'</span>,<span class="cm-variable">alpha</span>=<span class="cm-number">0.5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ax2</span>.<span class="cm-property">set_title</span>(<span class="cm-string">'log(fnlwgt)'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 384px;"></div><div class="CodeMirror-gutters" style="display: none; height: 414px;"></div></div></div></pre><p>cpl_gain、cpl_loss：先看hist分布图（如下），发现值分布非常集中，但是值域很广。对这两组属性的处理先后尝试了多种办法，过程如下。</p><p><img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask2%5D%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/pic/cpl_gain_loss_original.png' alt='cpl_gain_loss_original' /></p><ol><li>采用百分位数截断。排序后先截断（上下各截断5%），留取中间的90%做映射到[1,k]，最后对下界5%的数据取0，上界5%数据取k+1，但实际效果不好，因为这个阈值不好取，取了也不能简单说明是离群的，而且很受数据分布影响，如两组数据的分布都集中在5%的的区间以内，也就说[0,95%]的数据取值都是0，故弃用这种方法。<img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask2%5D%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/pic/sorted_cpl_plot.png' alt='sorted_cpl_plot' /></li><li>采用偏差程度（z-分数）作为偏离程度的衡量，绝对值超过3的认为是异常(对于标准差不为0或不接近0的数据，z-分数是有意义的，且通常以3作为异常值的评判阈值)，剩下的数据映射到[1,k]范围内，最后对上下界异常区间内的数据分别映射为0和k+1.但实际实现中效果不好，因为这个离群的阈值和标准std的大小很有关系，不好取，如cpl_gain取threshold为[-0.2,0]任然能满足该区间内数据占比大于90%，但没法解释，因为这样是认为超过均值的所有元素都是离群的被舍弃，这不科学，且合理数据区域的取值区间仍然很大[0,1151]。</li><li>类似百分位数思想，针对数据集中的特点，采用均值的上下p%的值域内的数据做为合理数据，之外的数据认为离群点。发现90%上的数据都是0，剩下的元素取值很大。这种办法还是不能解决问题。</li><li>// TODO 未解决。目前先简单做标记，对不为0的元素取1做标志，不做量的处理。</li></ol><p>连续属性离散之后的统计数据。</p><table><thead><tr><th>属性名</th><th>最小值</th><th>最大值</th><th>均值</th><th>标准差</th><th>相关性</th></tr></thead><tbody><tr><td>age</td><td>3</td><td>18</td><td>7.29</td><td>2.65</td><td>0.240</td></tr><tr><td>fnlwgt</td><td>1</td><td>10</td><td>5.49</td><td>1.30</td><td>-0.000</td></tr><tr><td>edu_num</td><td>1</td><td>16</td><td>10.12</td><td>2.55</td><td>0.335</td></tr><tr><td>cpl_gain</td><td>0</td><td>1</td><td>0.08</td><td>0.28</td><td>0.266</td></tr><tr><td>cpl_loss</td><td>0</td><td>1</td><td>0.05</td><td>0.21</td><td>0.138</td></tr><tr><td>hours_pw</td><td>0</td><td>19</td><td>8.11</td><td>2.41</td><td>0.230</td></tr></tbody></table></li></ul></li><li><p>对字符串数据进行离散化映射，字符串到int的映射，这里没有有序性。<strong><em>存在一个问题：如何衡量该属性与类别的相关性？1）根据经验，对字符串做排序，这样得到的映射是有序的，可以求得与类别属性的相关性。2）不做相关性分析，直接用图的方式表现属性取值与类别的区分关系（这里采用第二种，即可视化的方式，但感觉还是不如数学运算可靠）</em></strong></p><pre class="md-fences md-end-block" lang="python"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; min-height: 1056px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 映射表：无排序映射</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 数据映射字典（字符串型数据到整形映射）</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dic_workclass</span> = {<span class="cm-string">'Private'</span>:<span class="cm-number">1</span>, <span class="cm-string">'Self-emp-not-inc'</span>:<span class="cm-number">2</span>, <span class="cm-string">'Self-emp-inc'</span>:<span class="cm-number">3</span>, <span class="cm-string">'Federal-gov'</span>:<span class="cm-number">4</span>,<span class="cm-string">'Local-gov'</span>:<span class="cm-number">4</span>, <span class="cm-string">'State-gov'</span>:<span class="cm-number">5</span>, <span class="cm-string">'Without-pay'</span>:<span class="cm-number">6</span>, <span class="cm-string">'Never-worked'</span>:<span class="cm-number">7</span>}</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dic_education</span> = {<span class="cm-string">'Bachelors'</span>:<span class="cm-number">1</span>, <span class="cm-string">'Some-college'</span>:<span class="cm-number">2</span>, <span class="cm-string">'11th'</span>:<span class="cm-number">3</span>, <span class="cm-string">'HS-grad'</span>:<span class="cm-number">4</span>, <span class="cm-string">'Prof-school'</span>:<span class="cm-number">5</span>,<span class="cm-string">'Assoc-acdm'</span>:<span class="cm-number">6</span>, <span class="cm-string">'Assoc-voc'</span>:<span class="cm-number">7</span>, <span class="cm-string">'9th'</span>:<span class="cm-number">8</span>, <span class="cm-string">'7th-8th'</span>:<span class="cm-number">9</span>, <span class="cm-string">'12th'</span>:<span class="cm-number">10</span>, <span class="cm-string">'Masters'</span>:<span class="cm-number">11</span>,<span class="cm-string">'1st-4th'</span>:<span class="cm-number">12</span>, <span class="cm-string">'10th'</span>:<span class="cm-number">13</span>, <span class="cm-string">'Doctorate'</span>:<span class="cm-number">14</span>, <span class="cm-string">'5th-6th'</span>:<span class="cm-number">15</span>, <span class="cm-string">'Preschool'</span>:<span class="cm-number">15</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dic_marital_status</span>= {<span class="cm-string">'Married-civ-spouse'</span>:<span class="cm-number">1</span>, <span class="cm-string">'Divorced'</span>:<span class="cm-number">2</span>, <span class="cm-string">'Never-married'</span>:<span class="cm-number">3</span>, <span class="cm-string">'Separated'</span>:<span class="cm-number">4</span>,<span class="cm-string">'Widowed'</span>:<span class="cm-number">5</span>, <span class="cm-string">'Married-spouse-absent'</span>:<span class="cm-number">6</span>, <span class="cm-string">'Married-AF-spouse'</span>:<span class="cm-number">7</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dic_occupation</span> = {<span class="cm-string">'Tech-support'</span>:<span class="cm-number">1</span>, <span class="cm-string">'Craft-repair'</span>:<span class="cm-number">2</span>, <span class="cm-string">'Other-service'</span>:<span class="cm-number">3</span>, <span class="cm-string">'Sales'</span>:<span class="cm-number">4</span>, <span class="cm-string">'Exec-managerial'</span>:<span class="cm-number">5</span>, <span class="cm-string">'Prof-specialty'</span>:<span class="cm-number">6</span>, <span class="cm-string">'Handlers-cleaners'</span>:<span class="cm-number">7</span>, <span class="cm-string">'Machine-op-inspct'</span>:<span class="cm-number">8</span>, <span class="cm-string">'Adm-clerical'</span>:<span class="cm-number">9</span>, <span class="cm-string">'Farming-fishing'</span>:<span class="cm-number">10</span>, <span class="cm-string">'Transport-moving'</span>:<span class="cm-number">11</span>, <span class="cm-string">'Priv-house-serv'</span>:<span class="cm-number">12</span>, &nbsp;<span class="cm-string">'Protective-serv'</span>:<span class="cm-number">13</span>, <span class="cm-string">'Armed-Forces'</span>:<span class="cm-number">14</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dic_relationship</span> = {<span class="cm-string">'Wife'</span>:<span class="cm-number">1</span>, <span class="cm-string">'Own-child'</span>:<span class="cm-number">2</span>, <span class="cm-string">'Husband'</span>:<span class="cm-number">3</span>, <span class="cm-string">'Not-in-family'</span>:<span class="cm-number">4</span>,<span class="cm-string">'Other-relative'</span>:<span class="cm-number">5</span>, <span class="cm-string">'Unmarried'</span>:<span class="cm-number">6</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dic_race</span> = {<span class="cm-string">'White'</span>:<span class="cm-number">1</span>, <span class="cm-string">'Asian-Pac-Islander'</span>:<span class="cm-number">2</span>, <span class="cm-string">'Amer-Indian-Eskimo'</span>:<span class="cm-number">3</span>, <span class="cm-string">'Other'</span>:<span class="cm-number">4</span>, <span class="cm-string">'Black'</span>:<span class="cm-number">5</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dic_sex</span> = {<span class="cm-string">'Female'</span>:<span class="cm-number">1</span>, <span class="cm-string">'Male'</span>:<span class="cm-number">2</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dic_native_country</span> =  {<span class="cm-string">'United-States'</span>:<span class="cm-number">1</span>, <span class="cm-string">'Cambodia'</span>:<span class="cm-number">2</span>, <span class="cm-string">'England'</span>:<span class="cm-number">3</span>, <span class="cm-string">'Puerto-Rico'</span>:<span class="cm-number">4</span>,<span class="cm-string">'Canada'</span>:<span class="cm-number">5</span>, <span class="cm-string">'Germany'</span>:<span class="cm-number">6</span>, <span class="cm-string">'Outlying-US(Guam-USVI-etc)'</span>:<span class="cm-number">7</span>, <span class="cm-string">'India'</span>:<span class="cm-number">8</span>,<span class="cm-string">'Japan'</span>:<span class="cm-number">9</span>, <span class="cm-string">'Greece'</span>:<span class="cm-number">10</span>, <span class="cm-string">'South'</span>:<span class="cm-number">11</span>, <span class="cm-string">'China'</span>:<span class="cm-number">12</span>, <span class="cm-string">'Cuba'</span>:<span class="cm-number">13</span>, <span class="cm-string">'Iran'</span>:<span class="cm-number">14</span>, <span class="cm-string">'Honduras'</span>:<span class="cm-number">15</span>, <span class="cm-string">'Philippines'</span>:<span class="cm-number">16</span>, <span class="cm-string">'Italy'</span>:<span class="cm-number">17</span>, <span class="cm-string">'Poland'</span>:<span class="cm-number">18</span>, <span class="cm-string">'Jamaica'</span>:<span class="cm-number">19</span>,<span class="cm-string">'Vietnam'</span>:<span class="cm-number">20</span>, <span class="cm-string">'Mexico'</span>:<span class="cm-number">21</span>, <span class="cm-string">'Portugal'</span>:<span class="cm-number">22</span>, <span class="cm-string">'Ireland'</span>:<span class="cm-number">23</span>, <span class="cm-string">'France'</span>:<span class="cm-number">24</span>,<span class="cm-string">'Dominican-Republic'</span>:<span class="cm-number">25</span>, <span class="cm-string">'Laos'</span>:<span class="cm-number">26</span>, <span class="cm-string">'Ecuador'</span>:<span class="cm-number">27</span>, <span class="cm-string">'Taiwan'</span>:<span class="cm-number">12</span>, <span class="cm-string">'Haiti'</span>:<span class="cm-number">29</span>,<span class="cm-string">'Columbia'</span>:<span class="cm-number">30</span>, <span class="cm-string">'Hungary'</span>:<span class="cm-number">31</span>, <span class="cm-string">'Guatemala'</span>:<span class="cm-number">32</span>, <span class="cm-string">'Nicaragua'</span>:<span class="cm-number">33</span>, <span class="cm-string">'Scotland'</span>:<span class="cm-number">28</span>,<span class="cm-string">'Thailand'</span>:<span class="cm-number">34</span>, <span class="cm-string">'Yugoslavia'</span>:<span class="cm-number">35</span>, <span class="cm-string">'El-Salvador'</span>:<span class="cm-number">36</span>, <span class="cm-string">'Trinadad&amp;Tobago'</span>:<span class="cm-number">37</span>,<span class="cm-string">'Peru'</span>:<span class="cm-number">38</span>, <span class="cm-string">'Hong'</span>:<span class="cm-number">39</span>, <span class="cm-string">'Holand-Netherlands'</span>:<span class="cm-number">40</span>}</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dic_class</span> = {<span class="cm-string">'&lt;=50K'</span>:<span class="cm-number">0</span>,<span class="cm-string">'&gt;50K'</span>:<span class="cm-number">1</span>}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 1056px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1086px;"></div></div></div></pre><p><img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask2%5D%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/pic/str_attrs_2_hist.png' alt='str_attrs_2_hist.png' /></p><p>结论：解释性不强，没有明确的衡量这种区分度的方法</p></li></ul><p>4.可视化（分布图、最大相关性的属性建立的3D散点图）</p><ul><li><p>与类别属性具有最高相关度的3个连续属性为3个轴，绘制的类型3D散点图</p><p><img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask2%5D%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/pic/3D_1_continuous_att.png' alt='3d1' /></p></li><li><p>与类别属性最相关的3个离散属性为3个轴，绘制的类型3D散点图</p><p><img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask2%5D%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/pic/3D_2_str_att.png' alt='3d2' /></p></li><li><p>选取3个相关性较高(观测结论)的属性绘制的类型3D散点图</p><p><img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask2%5D%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/pic/3D_3.png' alt='3d3' /></p></li></ul><hr /><h2><a name='header-n133' class='md-header-anchor '></a>Task2_Python学习</h2><p>本阶段学习内容为python语言的语法学习，以及常用的科学计算库matplotlib和numpy的简单使用，能使用python语言实现数据处理、计算和可视化任务。</p><p>具体的学习笔记见本项目下文件：</p><ul><li>/项目二/[Task1]学习python/python.md</li><li>/项目二/[Task1]学习python/matplotlib &amp; numpy.md</li><li>matplotlib练习代码：/项目二/[Task1]学习python/project_matplotlib</li></ul><p>github地址：<a href='https://github.com/foreverfruit/DataMining/tree/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask1%5D%E5%AD%A6%E4%B9%A0python'>Task 2：python学习</a></p><p></p><h2><a name='header-n152' class='md-header-anchor '></a>Task3_决策树实现</h2><p>这部分的学习内容主要是完成一个小的练习项目，对鸢尾花数据集进行挖掘，采用决策树的算法实现预测分类功能。</p><p>数据集：<a href='http://archive.ics.uci.edu/ml/datasets/Iris'>http://archive.ics.uci.edu/ml/datasets/Iris</a></p><p><strong><em>数据集信息</em></strong></p><ul><li>数据量小：150个记录，每个类50，共3个类标号</li><li>属性：4维，连续型</li><li>数据完整，不存在缺失项</li></ul><p><strong><em>数据可视化</em></strong></p><p>这里可视化采用的是原始数据，为了大致观测到数据的一些特性</p><p>1.各属性直方图</p><p><img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask3%5D%E5%AE%9E%E7%8E%B0%E4%B8%80%E7%A7%8D%E5%88%86%E7%B1%BB%E6%96%B9%E6%B3%95-%E5%86%B3%E7%AD%96%E6%A0%91/pics/attr_hist.png' alt='pic' /></p><p>可以看到，属性petal_length和属性petal_width对类的区分度非常高，也和统计数据中的相关度相吻合。（事实上，下文的决策树在结点分裂的时候，会选用划分后Gini指数最低的属性进行划分，即子集的纯度最高，显然第一次的时候用属性petal_width会得到效果最好的划分。）</p><pre class="md-fences md-end-block" lang="python"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; min-height: 832px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> &nbsp;<span class="cm-variable">numpy</span> <span class="cm-keyword">as</span> <span class="cm-variable">np</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> &nbsp;<span class="cm-variable">matplotlib</span>.<span class="cm-property">pyplot</span> <span class="cm-keyword">as</span> <span class="cm-variable">plt</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> &nbsp;<span class="cm-variable">os</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># load data</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pro_root</span> = <span class="cm-variable">os</span>.<span class="cm-property">path</span>.<span class="cm-property">abspath</span>(<span class="cm-string">'..'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sl</span>,<span class="cm-variable">sw</span>,<span class="cm-variable">pl</span>,<span class="cm-variable">pw</span> = <span class="cm-variable">np</span>.<span class="cm-property">loadtxt</span>(<span class="cm-variable">pro_root</span><span class="cm-operator">+</span><span class="cm-string">'/dataset/iris.data'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">delimiter</span>=<span class="cm-string">','</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">unpack</span>=<span class="cm-keyword">True</span>,<span class="cm-variable">dtype</span>=<span class="cm-builtin">float</span>,<span class="cm-variable">usecols</span>=(<span class="cm-number">0</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">datarray</span> = <span class="cm-variable">np</span>.<span class="cm-property">array</span>([<span class="cm-variable">sl</span>,<span class="cm-variable">sw</span>,<span class="cm-variable">pl</span>,<span class="cm-variable">pw</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">attr_names</span> = [<span class="cm-string">'sepal length'</span>,<span class="cm-string">'sepal width'</span>,<span class="cm-string">'petal length'</span>,<span class="cm-string">'petal width'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class_names</span> = [<span class="cm-string">'setosa'</span>,<span class="cm-string">'versicolor'</span>,<span class="cm-string">'virginica'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># plot</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plt</span>.<span class="cm-property">style</span>.<span class="cm-property">use</span>(<span class="cm-string">'ggplot'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">figure</span> = <span class="cm-variable">plt</span>.<span class="cm-property">figure</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">i</span>,<span class="cm-variable">data</span> <span class="cm-keyword">in</span> <span class="cm-builtin">enumerate</span>(<span class="cm-variable">datarray</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">d1</span>,<span class="cm-variable">d2</span>,<span class="cm-variable">d3</span> = <span class="cm-variable">data</span>[:<span class="cm-number">50</span>],<span class="cm-variable">data</span>[<span class="cm-number">50</span>:<span class="cm-number">100</span>],<span class="cm-variable">data</span>[<span class="cm-number">100</span>:]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axe</span> = <span class="cm-variable">figure</span>.<span class="cm-property">add_subplot</span>(<span class="cm-number">221</span><span class="cm-operator">+</span><span class="cm-variable">i</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axe</span>.<span class="cm-property">hist</span>(<span class="cm-variable">d1</span>,<span class="cm-variable">color</span>=<span class="cm-string">'r'</span>,<span class="cm-variable">bins</span>=<span class="cm-number">10</span>,<span class="cm-variable">alpha</span>=<span class="cm-number">0.5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axe</span>.<span class="cm-property">hist</span>(<span class="cm-variable">d2</span>,<span class="cm-variable">color</span>=<span class="cm-string">'g'</span>,<span class="cm-variable">bins</span>=<span class="cm-number">10</span>,<span class="cm-variable">alpha</span>=<span class="cm-number">0.5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axe</span>.<span class="cm-property">hist</span>(<span class="cm-variable">d3</span>,<span class="cm-variable">color</span>=<span class="cm-string">'b'</span>,<span class="cm-variable">bins</span>=<span class="cm-number">10</span>,<span class="cm-variable">alpha</span>=<span class="cm-number">0.5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axe</span>.<span class="cm-property">set_title</span>(<span class="cm-variable">attr_names</span>[<span class="cm-variable">i</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axe</span>.<span class="cm-property">legend</span>(<span class="cm-variable">labels</span> = <span class="cm-variable">class_names</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 832px;"></div><div class="CodeMirror-gutters" style="display: none; height: 862px;"></div></div></div></pre><p></p><p>2.各属性盒装图</p><p>这里取whis参数为0.9，用以控制离群点的“离群”程度定义，图中可以看出类别1在4种属性上的分布都比较分散。</p><p><img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask3%5D%E5%AE%9E%E7%8E%B0%E4%B8%80%E7%A7%8D%E5%88%86%E7%B1%BB%E6%96%B9%E6%B3%95-%E5%86%B3%E7%AD%96%E6%A0%91/pics/attr_box.png' alt='pic2' /></p><pre class="md-fences md-end-block" lang="python"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; min-height: 768px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> &nbsp;<span class="cm-variable">numpy</span> <span class="cm-keyword">as</span> <span class="cm-variable">np</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> &nbsp;<span class="cm-variable">matplotlib</span>.<span class="cm-property">pyplot</span> <span class="cm-keyword">as</span> <span class="cm-variable">plt</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> &nbsp;<span class="cm-variable">os</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># load data</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pro_root</span> = <span class="cm-variable">os</span>.<span class="cm-property">path</span>.<span class="cm-property">abspath</span>(<span class="cm-string">'..'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sl</span>,<span class="cm-variable">sw</span>,<span class="cm-variable">pl</span>,<span class="cm-variable">pw</span> = <span class="cm-variable">np</span>.<span class="cm-property">loadtxt</span>(<span class="cm-variable">pro_root</span><span class="cm-operator">+</span><span class="cm-string">'/dataset/iris.data'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">delimiter</span>=<span class="cm-string">','</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">unpack</span>=<span class="cm-keyword">True</span>,<span class="cm-variable">dtype</span>=<span class="cm-builtin">float</span>,<span class="cm-variable">usecols</span>=(<span class="cm-number">0</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">datarray</span> = <span class="cm-variable">np</span>.<span class="cm-property">array</span>([<span class="cm-variable">sl</span>,<span class="cm-variable">sw</span>,<span class="cm-variable">pl</span>,<span class="cm-variable">pw</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">attr_names</span> = [<span class="cm-string">'sepal length'</span>,<span class="cm-string">'sepal width'</span>,<span class="cm-string">'petal length'</span>,<span class="cm-string">'petal width'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class_names</span> = [<span class="cm-string">'setosa'</span>,<span class="cm-string">'versicolor'</span>,<span class="cm-string">'virginica'</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># plot</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plt</span>.<span class="cm-property">style</span>.<span class="cm-property">use</span>(<span class="cm-string">'ggplot'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">figure</span> = <span class="cm-variable">plt</span>.<span class="cm-property">figure</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">i</span>,<span class="cm-variable">data</span> <span class="cm-keyword">in</span> <span class="cm-builtin">enumerate</span>(<span class="cm-variable">datarray</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">d1</span>,<span class="cm-variable">d2</span>,<span class="cm-variable">d3</span> = <span class="cm-variable">data</span>[:<span class="cm-number">50</span>],<span class="cm-variable">data</span>[<span class="cm-number">50</span>:<span class="cm-number">100</span>],<span class="cm-variable">data</span>[<span class="cm-number">100</span>:]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axe</span> = <span class="cm-variable">figure</span>.<span class="cm-property">add_subplot</span>(<span class="cm-number">221</span><span class="cm-operator">+</span><span class="cm-variable">i</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axe</span>.<span class="cm-property">boxplot</span>((<span class="cm-variable">d1</span>,<span class="cm-variable">d2</span>,<span class="cm-variable">d3</span>), <span class="cm-variable">whis</span>=<span class="cm-number">0.9</span>, <span class="cm-variable">sym</span>=<span class="cm-string">'rx'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axe</span>.<span class="cm-property">set_title</span>(<span class="cm-variable">attr_names</span>[<span class="cm-variable">i</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">axe</span>.<span class="cm-property">set_xticklabels</span>(<span class="cm-variable">class_names</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 768px;"></div><div class="CodeMirror-gutters" style="display: none; height: 798px;"></div></div></div></pre><p></p><p>3、三维散布图</p><p>这里选取相关度最高的三个属性做三维图，可以看到红色的类型的区别度较高，也印证直方图的属性分布图中，红色的类型setosa的4个属性与其他类型相应的属性取值范围间隔较大，几乎没有相交的，反映到三维途中会有直观的“距离”感</p><p><img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask3%5D%E5%AE%9E%E7%8E%B0%E4%B8%80%E7%A7%8D%E5%88%86%E7%B1%BB%E6%96%B9%E6%B3%95-%E5%86%B3%E7%AD%96%E6%A0%91/pics/attr_3d_scatter.png' alt='pic3' /></p><pre class="md-fences md-end-block" lang="python"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; min-height: 896px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> &nbsp;<span class="cm-variable">numpy</span> <span class="cm-keyword">as</span> <span class="cm-variable">np</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> &nbsp;<span class="cm-variable">matplotlib</span>.<span class="cm-property">pyplot</span> <span class="cm-keyword">as</span> <span class="cm-variable">plt</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">mpl_toolkits</span>.<span class="cm-property">mplot3d</span> <span class="cm-keyword">import</span> <span class="cm-variable">Axes3D</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> &nbsp;<span class="cm-variable">os</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># load data</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">pro_root</span> = <span class="cm-variable">os</span>.<span class="cm-property">path</span>.<span class="cm-property">abspath</span>(<span class="cm-string">'..'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">sl</span>,<span class="cm-variable">sw</span>,<span class="cm-variable">pl</span>,<span class="cm-variable">pw</span> = <span class="cm-variable">np</span>.<span class="cm-property">loadtxt</span>(<span class="cm-variable">pro_root</span><span class="cm-operator">+</span><span class="cm-string">'/dataset/iris.data'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">delimiter</span>=<span class="cm-string">','</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">unpack</span>=<span class="cm-keyword">True</span>,<span class="cm-variable">dtype</span>=<span class="cm-builtin">float</span>,<span class="cm-variable">usecols</span>=(<span class="cm-number">0</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">datarray</span> = <span class="cm-variable">np</span>.<span class="cm-property">array</span>([<span class="cm-variable">sl</span>,<span class="cm-variable">sw</span>,<span class="cm-variable">pl</span>,<span class="cm-variable">pw</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">attr_names</span> = [<span class="cm-string">'sepal length'</span>,<span class="cm-string">'sepal width'</span>,<span class="cm-string">'petal length'</span>,<span class="cm-string">'petal width'</span>]</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">class_names</span> = [<span class="cm-string">'setosa'</span>,<span class="cm-string">'versicolor'</span>,<span class="cm-string">'virginica'</span>]</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># plot</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plt</span>.<span class="cm-property">style</span>.<span class="cm-property">use</span>(<span class="cm-string">'ggplot'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">figure</span> = <span class="cm-variable">plt</span>.<span class="cm-property">figure</span>()</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">axe</span> = <span class="cm-variable">figure</span>.<span class="cm-property">add_subplot</span>(<span class="cm-number">111</span>, <span class="cm-variable">projection</span> = <span class="cm-string">'3d'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">axe</span>.<span class="cm-property">scatter</span>(<span class="cm-variable">sw</span>[:<span class="cm-number">50</span>], <span class="cm-variable">pl</span>[:<span class="cm-number">50</span>], <span class="cm-variable">pw</span>[:<span class="cm-number">50</span>], <span class="cm-variable">c</span>=<span class="cm-string">'r'</span>, <span class="cm-variable">marker</span>=<span class="cm-string">'^'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">axe</span>.<span class="cm-property">scatter</span>(<span class="cm-variable">sw</span>[<span class="cm-number">50</span>:<span class="cm-number">100</span>], <span class="cm-variable">pl</span>[<span class="cm-number">50</span>:<span class="cm-number">100</span>], <span class="cm-variable">pw</span>[<span class="cm-number">50</span>:<span class="cm-number">100</span>], <span class="cm-variable">c</span>=<span class="cm-string">'g'</span>, <span class="cm-variable">marker</span>=<span class="cm-string">'x'</span>)</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">axe</span>.<span class="cm-property">scatter</span>(<span class="cm-variable">sw</span>[<span class="cm-number">100</span>:<span class="cm-number">150</span>], <span class="cm-variable">pl</span>[<span class="cm-number">100</span>:<span class="cm-number">150</span>], <span class="cm-variable">pw</span>[<span class="cm-number">100</span>:<span class="cm-number">150</span>], <span class="cm-variable">c</span>=<span class="cm-string">'b'</span>, <span class="cm-variable">marker</span>=<span class="cm-string">'.'</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">axe</span>.<span class="cm-property">set_xlabel</span>(<span class="cm-variable">attr_names</span>[<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">axe</span>.<span class="cm-property">set_ylabel</span>(<span class="cm-variable">attr_names</span>[<span class="cm-number">2</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">axe</span>.<span class="cm-property">set_zlabel</span>(<span class="cm-variable">attr_names</span>[<span class="cm-number">3</span>])</span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 896px;"></div><div class="CodeMirror-gutters" style="display: none; height: 926px;"></div></div></div></pre><p></p><p><strong><em>数据预处理</em></strong></p><p>这里数据集较为简单，没有做过多数据预处理，仅在加载数据的同时，就地做了离散化工作，根据统计信息（如下表），做出相应的离散映射</p><table><thead><tr><th>Class</th><th>Min</th><th>Max</th><th>Mean</th><th>SD</th><th>Class Correlation</th></tr></thead><tbody><tr><td>sepal length</td><td>4.3</td><td>7.9</td><td>5.84</td><td>0.83</td><td>0.78</td></tr><tr><td>sepal width</td><td>2.0</td><td>4.4</td><td>3.05</td><td>0.43</td><td>-0.4194</td></tr><tr><td>petal length</td><td>1.0</td><td>6.9</td><td>3.76</td><td>1.76</td><td>0.9490</td></tr><tr><td>petal width</td><td>0.1</td><td>2.5</td><td>1.2</td><td>0.76</td><td>0.9565</td></tr></tbody></table><p>映射步骤：根据每个属性的最大值最小值，取得一个取值空间，然后以0.5为一个步长，将这个取值空间映射到从1开始的整数序列上，如petal width取值范围(0.1,2.5)，则取范围[0,3]根据0.5步长映射为，1 = [0,0.5),2 = [0.5,1),3 = [1,1.5), 4 = [1.5,2), 5 = [2,2.5]，实现代码如下：</p><pre class="md-fences md-end-block" lang="python"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; min-height: 737px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">newset</span> = []</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 离散值集合</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">valueset</span>=<span class="cm-builtin">range</span>(<span class="cm-number">1</span>,<span class="cm-number">13</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 遍历处理每一条记录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">record</span> <span class="cm-keyword">in</span> <span class="cm-variable">dataset</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">newrecord</span> = []</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> <span class="cm-variable">index</span>,<span class="cm-variable">value</span> <span class="cm-keyword">in</span> <span class="cm-builtin">enumerate</span>(<span class="cm-variable">record</span>):</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">i</span> = <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">index</span>==<span class="cm-number">0</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># sepal length[4.3,7.9]取[4,8]内按0.5步长做区间划分</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">i</span> = <span class="cm-builtin">int</span>((<span class="cm-builtin">float</span>(<span class="cm-variable">value</span>)<span class="cm-operator">*</span><span class="cm-number">10</span><span class="cm-operator">-</span><span class="cm-number">40</span>)<span class="cm-operator">/</span><span class="cm-number">5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">index</span>==<span class="cm-number">1</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">i</span> = <span class="cm-builtin">int</span>((<span class="cm-builtin">float</span>(<span class="cm-variable">value</span>) <span class="cm-operator">*</span> <span class="cm-number">10</span> <span class="cm-operator">-</span> <span class="cm-number">20</span>) <span class="cm-operator">/</span> <span class="cm-number">5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">index</span>==<span class="cm-number">2</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">i</span> = <span class="cm-builtin">int</span>((<span class="cm-builtin">float</span>(<span class="cm-variable">value</span>) <span class="cm-operator">*</span> <span class="cm-number">10</span> <span class="cm-operator">-</span> <span class="cm-number">10</span>) <span class="cm-operator">/</span> <span class="cm-number">5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">index</span>==<span class="cm-number">3</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">i</span> = <span class="cm-builtin">int</span>(<span class="cm-builtin">float</span>(<span class="cm-variable">value</span>)<span class="cm-operator">*</span><span class="cm-number">10</span><span class="cm-operator">/</span><span class="cm-number">5</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment"># class label 属性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> <span class="cm-variable">index</span>==<span class="cm-number">4</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">newrecord</span>.<span class="cm-property">append</span>(<span class="cm-variable">classlabel</span>.<span class="cm-property">get</span>(<span class="cm-variable">value</span>))</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">newrecord</span>.<span class="cm-property">append</span>(<span class="cm-variable">valueset</span>[<span class="cm-variable">i</span>])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">newset</span>.<span class="cm-property">append</span>(<span class="cm-variable">newrecord</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 737px;"></div><div class="CodeMirror-gutters" style="display: none; height: 767px;"></div></div></div></pre><p></p><p><strong><em>决策树实现</em></strong></p><p>这里直接采用书中决策树的描述，根据iris数据集的特点实现了决策树，实现过程中主要有一下重点问题。</p><ul><li><p>结点分裂算法：Hunt算法，将数据当做一个数据流，边构造决策树边流动，直到所有的数据都流到了叶结点上。递归执行划分方法。</p></li><li><p>划分问题1：属性划分点的确定，书中着重介绍了二元划分的方案，本数据集是三元划分。三元划分可以转换为二元划分，对于某一特定的属性A，对它的取值空间做二元划分，用划分后的子集的纯度（这里我采用Gini指数度量）来衡量选取属性的效果。这种划分方法优点是实现简单，但会造成决策树深度过大。</p><p>我采用的方法：多路划分，根据划分评价的原理：寻找子类纯度最高的划分。那么可以认为最优的划分就是经过这次划分后，子类中类别区分最明显，这里根据数据集特点做出假设：每种类别的记录在某一个属性上的取值明显呈现“聚堆”现象。那么最优的划分点就是这些“堆”的边界点。本例中划分点没有通过代码计算，采用图像观测。图像如下：</p><p><img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask3%5D%E5%AE%9E%E7%8E%B0%E4%B8%80%E7%A7%8D%E5%88%86%E7%B1%BB%E6%96%B9%E6%B3%95-%E5%86%B3%E7%AD%96%E6%A0%91/pics/divide_point1.png' alt='pic4' /></p><p><img src='https://raw.githubusercontent.com/foreverfruit/DataMining/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask3%5D%E5%AE%9E%E7%8E%B0%E4%B8%80%E7%A7%8D%E5%88%86%E7%B1%BB%E6%96%B9%E6%B3%95-%E5%86%B3%E7%AD%96%E6%A0%91/pics/divide_point2.png' alt='pic5' /></p><p>上面的离散处理之后的图像，下面的是未处理的原始数据图像。根据图像可以找到如下的划分点：（原始图上值和划分点值有差距，是因为离散化映射的问题）</p><pre class="md-fences md-end-block" lang="python"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; min-height: 96px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 因为值是int的，这里划分点取float，避免值等于划分点时的区间开闭情况</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">dp</span> = {<span class="cm-string">'sl'</span>:(<span class="cm-number">3.5</span>,<span class="cm-number">5.5</span>),<span class="cm-string">'sw'</span>:(<span class="cm-number">1.5</span>,<span class="cm-number">2.5</span>,<span class="cm-number">3.5</span>,<span class="cm-number">4.5</span>),<span class="cm-string">'pl'</span>:(<span class="cm-number">3</span>,),<span class="cm-string">'pw'</span>:(<span class="cm-number">2.1</span>,<span class="cm-number">3.8</span>,<span class="cm-number">4.8</span>)}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 96px;"></div><div class="CodeMirror-gutters" style="display: none; height: 126px;"></div></div></div></pre><p>这里取得上面的各属性的划分点就可以近似认为是最优的划分点，Gini最小，子类的纯度最高。</p></li><li><p>划分问题2：中止划分条件。1）当前结点的所有数据元素的属性值都相同，此时若类标号不同，取多数的类标号，少数的认为是异常值。2）当前结点95%的元素都是同一个类标号。</p></li><li><p>划分问题3：属性选取策略，一个结点具有n个可划分的属性（已经划分过的属性在该结点中元素取值肯定是相同的），问题是先选用n个中的哪一个属性作为当前的划分属性，此时已知各属性的最优划分点，所以可以用已知的划分点，对该结点的数据模拟各属性上的划分（模拟n次），计算这n次划分后的子集合的<strong>加权Gini系数</strong>，然后选取Gini最小的那个属性作为该结点划分属性。</p></li><li><p>划分问题4：可能存在一些结点，根据属性的划分点做划分后，并没有一条数据流入该子结点，此时，同样要为决策树创建这样的空叶结点，并做好标记，因为训练集没有数据流入该结点，测试集可能存在，要避免测试集数据找不到叶结点的情况，它的类别取其父节点中最多的类别。</p></li><li><p>算法流程：创建RootNode(这个TrainingSet流入该结点)，判断当前结点能否分裂（两个中止条件都要判定），选取最优的属性做划分（属性选取算法加权Gini），为每一个划分后的子数据集创建结点（数据分散流入子节点），递归调用子节点的划分函数divide()</p></li></ul><p><strong><em>算法评估</em></strong></p><p>时间原因，没有做深入评估，仅做了正确率的验证：90%左右（交换不同训练集和测试集得到的近似结果，没做具体的统计）</p><p>完整项目代码：<a href='https://github.com/foreverfruit/DataMining/tree/master/%E9%A1%B9%E7%9B%AE%E4%BA%8C/Report%201/%5BTask3%5D%E5%AE%9E%E7%8E%B0%E4%B8%80%E7%A7%8D%E5%88%86%E7%B1%BB%E6%96%B9%E6%B3%95-%E5%86%B3%E7%AD%96%E6%A0%91/iris'>Iris_DecisionTree_Github</a></p><p></p></div>
</body>
</html>